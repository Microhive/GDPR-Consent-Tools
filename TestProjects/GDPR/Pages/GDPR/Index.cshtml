@page
@model IdentityTest.Pages.IndexModel
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@{
    ViewData["Title"] = "GDPR Consent Page";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<h2>@ViewData["Title"]</h2>
<p>
    Enter new Purpose Title.
</p>
<div asp-validation-summary="All"></div>
<form method="POST">
    @for (int i = 0; i < Model.Purposes.Count(); i++)
    {
        <div>
            <input asp-for="@Model.Purposes[i].Selected" type="checkbox" />
            <label asp-for="@Model.Purposes[i].Selected">@Model.Purposes[i].Text</label>

            @Html.HiddenFor(x => @Model.Purposes[i].Value)
            @Html.HiddenFor(y => @Model.Purposes[i].Text)
        </div>
        @*<div class="checkbox">
                <label>
                    <input type="checkbox" name="Purposes[@i]" value="@Model.Purposes[i].Value" @(Model.Purposes[i].Selected ? "checked" : "") /> @Model.Purposes[i].Text
                </label>
            </div>*@
    }

    <input type="submit" />
</form>